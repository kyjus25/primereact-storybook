import{r as a}from"./index-76fb7be0.js";import{P as ee,m as h,c as N,O as M,l as te}from"./api.esm-2e2d159c.js";import{C as re,u as ne}from"./componentbase.esm-b0caea1e.js";import{d as oe,e as R,f as ae}from"./hooks.esm-c93f10ee.js";import"./_commonjsHelpers-de833af9.js";function D(t,n){(n==null||n>t.length)&&(n=t.length);for(var r=0,e=new Array(n);r<n;r++)e[r]=t[r];return e}function le(t){if(Array.isArray(t))return D(t)}function se(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function O(t,n){if(t){if(typeof t=="string")return D(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return D(t,n)}}function ce(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function T(t){return le(t)||se(t)||O(t)||ce()}function ie(t){if(Array.isArray(t))return t}function ue(t,n){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var e,w,E,g,f=[],i=!0,c=!1;try{if(E=(r=r.call(t)).next,n===0){if(Object(r)!==r)return;i=!1}else for(;!(i=(e=E.call(r)).done)&&(f.push(e.value),f.length!==n);i=!0);}catch(p){c=!0,w=p}finally{try{if(!i&&r.return!=null&&(g=r.return(),Object(g)!==g))return}finally{if(c)throw w}}return f}}function de(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fe(t,n){return ie(t)||ue(t,n)||O(t,n)||de()}var pe={header:"p-datascroller-header",footer:"p-datascroller-footer",content:"p-datascroller-content",list:"p-datascroller-list",root:function(n){var r=n.props;return N("p-datascroller p-component",{"p-datascroller-inline":r.inline})}},me=`
@layer primereact {
    .p-datascroller .p-datascroller-header {
        text-align: center;
        padding: .5em .75em;
        border-bottom: 0 none;
    }
    
    .p-datascroller .p-datascroller-footer {
        text-align: center;
        padding: .25em .625em;
        border-top: 0px none;
    }
    
    .p-datascroller .p-datascroller-content {
        padding: .25em .625em;
    }
    
    .p-datascroller-inline .p-datascroller-content {
        overflow: auto;
    }
    
    .p-datascroller .p-datascroller-list {
        list-style-type: none; 
        margin: 0;
        padding: 0;
    }
}
`,ye={content:function(n){var r=n.props;return{maxHeight:r.scrollHeight}}},H=re.extend({defaultProps:{__TYPE:"DataScroller",id:null,value:null,rows:0,inline:!1,scrollHeight:null,loader:!1,buffer:.9,style:null,className:null,onLazyLoad:null,emptyMessage:null,itemTemplate:null,header:null,footer:null,lazy:!1,children:void 0},css:{classes:pe,styles:me,inlineStyles:ye}}),j=a.memo(a.forwardRef(function(t,n){var r=a.useContext(ee),e=H.getProps(t,r),w=a.useState([]),E=fe(w,2),g=E[0],f=E[1],i=H.setMetaData({props:e}),c=i.ptm,p=i.cx,I=i.sx,U=i.isUnstyled;ne(H.css.styles,U,{name:"datascroller"});var _=a.useRef(null),d=a.useRef(null),b=a.useRef(e.value),m=a.useRef([]),y=a.useRef(0),u=a.useRef(null),B=function(){e.lazy?(m.current=b.current,f(T(m.current))):S()},S=function(){if(e.lazy)e.onLazyLoad&&e.onLazyLoad(k()),y.current+=e.rows;else if(b.current){for(var o=y.current;o<y.current+e.rows&&!(o>=b.current.length);o++)m.current.push(b.current[o]);b.current.length!==0&&(y.current+=e.rows),f(T(m.current))}},$=function(){y.current=0,m.current=[],f(T(m.current)),S()},k=function(){return{first:y.current,rows:e.rows}},F=function(){e.inline?(u.current=function(){var o=d.current.scrollTop,s=d.current.scrollHeight,v=d.current.clientHeight;o>=s*e.buffer-v&&S()},d.current.addEventListener("scroll",u.current)):(u.current=function(){var o=document.body,s=document.documentElement,v=window.pageYOffset||document.documentElement.scrollTop,x=s.clientHeight,Z=Math.max(o.scrollHeight,o.offsetHeight,x,s.scrollHeight,s.offsetHeight);v>=Z*e.buffer-x&&S()},window.addEventListener("scroll",u.current))},A=function(){u.current&&(e.inline&&d.current?d.current.removeEventListener("scroll",u.current):e.loader||window.removeEventListener("scroll",u.current)),u.current=null};oe(function(){S(),e.loader||F()}),R(function(){e.value&&(b.current=e.value,e.lazy||(y.current=0),m.current=[],B())},[e.value]),R(function(){e.loader&&A()},[e.loader]),ae(function(){u.current&&A()}),a.useImperativeHandle(n,function(){return{props:e,load:S,reset:$,getElement:function(){return _.current},getContent:function(){return d.current}}});var W=function(){var o=h({className:p("header")},c("header"));return e.header?a.createElement("div",o,e.header):null},Y=function(){var o=h({className:p("footer")},c("footer"));return e.footer?a.createElement("div",o,e.footer):null},J=function(o,s){var v=h({key:s+"_datascrollitem"},c("item")),x=e.itemTemplate?e.itemTemplate(o):o;return a.createElement("li",v,x)},X=function(){var o=h(c("emptyMessage")),s=M.getJSXElement(e.emptyMessage,e)||te("emptyMessage");return a.createElement("li",o,s)},q=function(){var o=h({ref:d,className:p("content"),style:I("content")},c("content")),s=h({className:p("list")},c("list")),v=M.isNotEmpty(g)?g.map(J):X();return a.createElement("div",o,a.createElement("ul",s,v))},G=W(),K=Y(),Q=q(),V=h({id:e.id,ref:_,className:N(e.className,p("root"))},H.getOtherProps(e),c("root"));return a.createElement("div",V,G,Q,K)}));j.displayName="DataScroller";const Ee={title:"Data/DataScroller",component:j,parameters:{layout:"centered"},argTypes:{buffer:{control:"number",description:"Number of buffer size.",options:null},children:{control:"text",description:"Used to get the child elements of the component.",options:null},emptyMessage:{control:"text",description:"Text to display when there is no data.",options:null},footer:{control:"text",description:"Label of footer.",options:null},header:{control:"text",description:"Label of header.",options:null},inline:{control:"boolean",description:"Defines if the event target to listen the scroll event is the element itself.",options:null},lazy:{control:"boolean",description:"Defines if data is loaded and interacted with in lazy manner.",options:null},loader:{control:"boolean",description:"Determines whether data is loaded by a target element.",options:null},pt:{control:"object",description:"Uses to pass attributes to DOM elements inside the component.",options:null},ptOptions:{control:"object",description:"Used to configure passthrough(pt) options of the component.",options:null},rows:{control:"number",description:"Number of rows to fetch in a load event.",options:null},scrollHeight:{control:"text",description:"Max height of the content area in inline mode.",options:null},unstyled:{control:"boolean",description:"When enabled, it removes component related styles in the core.",options:null},value:{control:"object",description:"An array of objects to display.",options:null}}},L={args:{value:0,unstyled:!1}};var P,z,C;L.parameters={...L.parameters,docs:{...(P=L.parameters)==null?void 0:P.docs,source:{originalSource:`{
  args: {
    "value": 0,
    "unstyled": false
  }
}`,...(C=(z=L.parameters)==null?void 0:z.docs)==null?void 0:C.source}}};const we=["Default"];export{L as Default,we as __namedExportsOrder,Ee as default};
//# sourceMappingURL=DataScroller.stories-aae7effb.js.map
