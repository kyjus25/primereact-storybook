import{r as s}from"./index-76fb7be0.js";import{P as ce,D as C,O as fe,c as pe}from"./api.esm-e57be548.js";import{a as de,b as H}from"./hooks.esm-2e882e60.js";import{I as ve}from"./inputtext.esm-a64793ac.js";import{C as me}from"./componentbase.esm-f35515f0.js";import"./_commonjsHelpers-de833af9.js";import"./keyfilter.esm-83306700.js";import"./tooltip.esm-969ffd2f.js";import"./portal.esm-d730a851.js";import"./index-d3ea75b5.js";function A(){return A=Object.assign?Object.assign.bind():function(E){for(var g=1;g<arguments.length;g++){var R=arguments[g];for(var n in R)Object.prototype.hasOwnProperty.call(R,n)&&(E[n]=R[n])}return E},A.apply(this,arguments)}var Z=me.extend({defaultProps:{__TYPE:"InputMask",autoClear:!0,autoFocus:!1,className:null,disabled:!1,id:null,mask:null,maxLength:null,name:null,onBlur:null,onChange:null,onComplete:null,onFocus:null,placeholder:null,readOnly:!1,required:!1,size:null,slotChar:"_",style:null,tabIndex:null,tooltip:null,tooltipOptions:null,type:"text",unmask:!1,value:null,children:void 0}}),Q=s.memo(s.forwardRef(function(E,g){var R=s.useContext(ce),n=Z.getProps(E,R),o=s.useRef(null),b=s.useRef(null),D=s.useRef(0),c=s.useRef([]),f=s.useRef([]),p=s.useRef(0),j=s.useRef(null),N=s.useRef(!1),O=s.useRef(null),X=s.useRef(null),x=s.useRef(null),P=s.useRef(null),T=s.useRef(null),K=s.useRef(!1),$={props:n},d=function(e,r){var t,u,a,i=o.current;if(!(!i||!i.offsetParent||i!==document.activeElement))if(typeof e=="number")u=e,a=typeof r=="number"?r:u,i.setSelectionRange?i.setSelectionRange(u,a):i.createTextRange&&(t=i.createTextRange(),t.collapse(!0),t.moveEnd("character",a),t.moveStart("character",u),t.select());else return i.setSelectionRange?(u=i.selectionStart,a=i.selectionEnd):document.selection&&document.selection.createRange&&(t=document.selection.createRange(),u=0-t.duplicate().moveStart("character",-1e5),a=u+t.text.length),{begin:u,end:a}},B=function(){for(var e=b.current;e<=D.current;e++)if(c.current[e]&&f.current[e]===v(e))return!1;return!0},v=s.useCallback(function(l){return l<n.slotChar.length?n.slotChar.charAt(l):n.slotChar.charAt(0)},[n.slotChar]),F=function(){return n.unmask?M():o.current&&o.current.value},k=function(e){for(;++e<p.current&&!c.current[e];);return e},ee=function(e){for(;--e>=0&&!c.current[e];);return e},U=function(e,r){var t,u;if(!(e<0)){for(t=e,u=k(r);t<p.current;t++)if(c.current[t]){if(u<p.current&&c.current[t].test(f.current[u]))f.current[t]=f.current[u],f.current[u]=v(u);else break;u=k(u)}y(),d(Math.max(b.current,e))}},te=function(e){var r,t,u,a;for(r=e,t=v(e);r<p.current;r++)if(c.current[r])if(u=k(r),a=f.current[r],f.current[r]=t,u<p.current&&c.current[u].test(a))t=a;else break},ne=function(e){var r=o.current.value,t=d();if(j.current.length&&j.current.length>r.length){for(m(!0);t.begin>0&&!c.current[t.begin-1];)t.begin--;if(t.begin===0)for(;t.begin<b.current&&!c.current[t.begin];)t.begin++;d(t.begin,t.begin)}else{for(m(!0);t.begin<p.current&&!c.current[t.begin];)t.begin++;d(t.begin,t.begin)}n.onComplete&&B()&&n.onComplete({originalEvent:e,value:F()}),h(e)},L=function(e){if(N.current=!1,m(),h(e),S(),n.onBlur&&n.onBlur(e),o.current.value!==O.current){var r=document.createEvent("HTMLEvents");r.initEvent("change",!0,!1),o.current.dispatchEvent(r)}},re=function(e){if(!n.readOnly){var r=e.which||e.keyCode,t,u,a;j.current=o.current.value,r===8||r===46||C.isIOS()&&r===127?(t=d(),u=t.begin,a=t.end,a-u===0&&(u=r!==46?ee(u):a=k(u-1),a=r===46?k(a):a),I(u,a),U(u,a-1),h(e),e.preventDefault()):r===13?(L(e),h(e)):r===27&&(o.current.value=O.current,d(0,m()),h(e),e.preventDefault())}},ue=function(e){if(!n.readOnly){var r=e.which||e.keyCode,t=d(),u,a,i,_;if(!(e.ctrlKey||e.altKey||e.metaKey||r<32)){if(r&&r!==13){if(t.end-t.begin!==0&&(I(t.begin,t.end),U(t.begin,t.end-1)),u=k(t.begin-1),u<p.current&&(a=String.fromCharCode(r),c.current[u].test(a))){if(te(u),f.current[u]=a,y(),i=k(u),C.isAndroid()){var se=function(){d(i)};setTimeout(se,0)}else d(i);t.begin<=D.current&&(_=B())}e.preventDefault()}h(e),n.onComplete&&_&&n.onComplete({originalEvent:e,value:F()})}}},I=function(e,r){var t;for(t=e;t<r&&t<p.current;t++)c.current[t]&&(f.current[t]=v(t))},y=function(){o.current&&(o.current.value=f.current.join(""))},m=function(e){X.current=!0;var r=o.current&&o.current.value,t=-1,u,a,i;for(u=0,i=0;u<p.current;u++)if(c.current[u]){for(f.current[u]=v(u);i++<r.length;)if(a=r.charAt(i-1),c.current[u].test(a)){f.current[u]=a,t=u;break}if(i>r.length){I(u+1,p.current);break}}else f.current[u]===r.charAt(i)&&i++,u<x.current&&(t=u);return e?y():t+1<x.current?n.autoClear||f.current.join("")===P.current?(o.current&&o.current.value&&(o.current.value=""),I(0,p.current)):y():(y(),o.current&&(o.current.value=o.current.value.substring(0,t+1))),x.current?u:b.current},oe=function(e){if(!n.readOnly){N.current=!0,clearTimeout(T.current);var r;o.current?O.current=o.current.value:O.current="",r=m()||0,T.current=setTimeout(function(){o.current===document.activeElement&&(y(),r===n.mask.replace("?","").length?d(0,r):d(r),S())},100),n.onFocus&&n.onFocus(e)}},ae=function(e){K.current?ne(e):q(e)},q=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!n.readOnly){if(!r){var t=m(!0);d(t)}h(e),n.onComplete&&B()&&n.onComplete({originalEvent:e,value:F()})}},M=s.useCallback(function(){for(var l=[],e=0;e<f.current.length;e++){var r=f.current[e];c.current[e]&&r!==v(e)&&l.push(r)}return l.join("")},[v]),h=function(e){if(n.onChange){var r=n.unmask?M():e&&e.target.value;n.onChange({originalEvent:e,value:P.current!==r?r:"",stopPropagation:function(){e.stopPropagation()},preventDefault:function(){e.preventDefault()},target:{name:n.name,id:n.id,value:P.current!==r?r:""}})}},S=function(){o.current&&o.current.value&&o.current.value.length>0?C.addClass(o.current,"p-filled"):C.removeClass(o.current,"p-filled")},V=function(e){var r;return o.current&&(n.value==null?o.current.value="":(o.current.value=n.value,r=m(e),setTimeout(function(){if(o.current)return y(),m(e)},10)),O.current=o.current.value),S(),r},z=s.useCallback(function(){return n.unmask?n.value!==M():P.current!==o.current.value&&o.current.value!==n.value},[n.unmask,n.value,M]),W=function(){if(n.mask){c.current=[],x.current=n.mask.length,p.current=n.mask.length,b.current=null;var e={9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"};K.current=C.isChrome()&&C.isAndroid();for(var r=n.mask.split(""),t=0;t<r.length;t++){var u=r[t];u==="?"?(p.current--,x.current=t):e[u]?(c.current.push(new RegExp(e[u])),b.current===null&&(b.current=c.current.length-1),t<x.current&&(D.current=c.current.length-1)):c.current.push(null)}f.current=[];for(var a=0;a<r.length;a++){var i=r[a];i!=="?"&&(e[i]?f.current.push(v(a)):f.current.push(i))}P.current=f.current.join("")}};s.useImperativeHandle(g,function(){return{props:n,focus:function(){return C.focus(o.current)},getElement:function(){return o.current}}}),s.useEffect(function(){fe.combinedRefs(o,g)},[o,g]),de(function(){W(),V()}),H(function(){W(),d(V(!0)),n.unmask&&h()},[n.mask]),H(function(){z()&&V()},[z]);var le=Z.getOtherProps(n),ie=pe("p-inputmask",n.className);return s.createElement(ve,A({ref:o,autoFocus:n.autoFocus,id:n.id,type:n.type,name:n.name,style:n.style,className:ie},le,{placeholder:n.placeholder,size:n.size,maxLength:n.maxLength,tabIndex:n.tabIndex,disabled:n.disabled,readOnly:n.readOnly,onFocus:oe,onBlur:L,onKeyDown:re,onKeyPress:ue,onInput:ae,onPaste:function(e){return q(e,!0)},required:n.required,tooltip:n.tooltip,tooltipOptions:n.tooltipOptions,pt:n.pt,unstyled:n.unstyled,__parentMetadata:{parent:$}}))}));Q.displayName="InputMask";const Ie={title:"Form/InputMask",component:Q,parameters:{layout:"centered"},argTypes:{autoClear:{control:"boolean",description:"Clears the incomplete value on blur.",options:null},children:{control:"text",description:"Used to get the child elements of the component.",options:null},disabled:{control:"boolean",description:"When present, it specifies that the element value cannot be altered.",options:null},keyfilter:{control:"object",description:"Format definition of the keys to block.",options:null},mask:{control:"text",description:"Mask pattern.",options:null},pt:{control:"object",description:"Uses to pass attributes to DOM elements inside the component.",options:null},ptOptions:{control:"object",description:"Used to configure passthrough(pt) options of the component.",options:null},readOnly:{control:"boolean",description:"When present, it specifies that an input field is read-only.",options:null},required:{control:"boolean",description:"When present, it specifies that the element must be filled out before submitting the form.",options:null},slotChar:{control:"text",description:"Placeholder character in mask.",options:null},tooltip:{control:"text",description:"Content of the tooltip.",options:null},tooltipOptions:{control:"object",description:"Configuration of the tooltip, refer to the tooltip documentation for more information.",options:null},unmask:{control:"boolean",description:"Defines if model sets the raw unmasked value to bound value or the formatted mask value.",options:null},unstyled:{control:"boolean",description:"When enabled, it removes component related styles in the core.",options:null},validateOnly:{control:"boolean",description:"When enabled, instead of blocking keys, input is validated internally to test against the regular expression.",options:null},value:{control:"text",description:"The value of component",options:null}}},w={args:{value:0,unstyled:!1}};var Y,G,J;w.parameters={...w.parameters,docs:{...(Y=w.parameters)==null?void 0:Y.docs,source:{originalSource:`{
  args: {
    "value": 0,
    "unstyled": false
  }
}`,...(J=(G=w.parameters)==null?void 0:G.docs)==null?void 0:J.source}}};const Me=["Default"];export{w as Default,Me as __namedExportsOrder,Ie as default};
