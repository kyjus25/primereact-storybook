import{r as s}from"./index-76fb7be0.js";import{a as ce,D as C,O as fe,c as pe}from"./api.esm-4644ee78.js";import{a as de,b as H}from"./hooks.esm-d069ba29.js";import{I as ve}from"./inputtext.esm-69345109.js";import{C as me}from"./componentbase.esm-1c796d7e.js";import"./_commonjsHelpers-de833af9.js";import"./keyfilter.esm-59cdc628.js";import"./tooltip.esm-2acddad6.js";import"./portal.esm-16954874.js";import"./index-d3ea75b5.js";function A(){return A=Object.assign?Object.assign.bind():function(E){for(var g=1;g<arguments.length;g++){var R=arguments[g];for(var r in R)Object.prototype.hasOwnProperty.call(R,r)&&(E[r]=R[r])}return E},A.apply(this,arguments)}var Z=me.extend({defaultProps:{__TYPE:"InputMask",autoClear:!0,autoFocus:!1,className:null,disabled:!1,id:null,mask:null,maxLength:null,name:null,onBlur:null,onChange:null,onComplete:null,onFocus:null,placeholder:null,readOnly:!1,required:!1,size:null,slotChar:"_",style:null,tabIndex:null,tooltip:null,tooltipOptions:null,type:"text",unmask:!1,value:null,children:void 0}}),Q=s.memo(s.forwardRef(function(E,g){var R=s.useContext(ce),r=Z.getProps(E,R),a=s.useRef(null),b=s.useRef(null),D=s.useRef(0),c=s.useRef([]),f=s.useRef([]),p=s.useRef(0),j=s.useRef(null),N=s.useRef(!1),O=s.useRef(null),X=s.useRef(null),x=s.useRef(null),P=s.useRef(null),T=s.useRef(null),K=s.useRef(!1),$={props:r},d=function(e,n){var t,u,o,i=a.current;return!i||!i.offsetParent||i!==document.activeElement?null:(typeof e=="number"?(u=e,o=typeof n=="number"?n:u,i.setSelectionRange?i.setSelectionRange(u,o):i.createTextRange&&(t=i.createTextRange(),t.collapse(!0),t.moveEnd("character",o),t.moveStart("character",u),t.select())):i.setSelectionRange?(u=i.selectionStart,o=i.selectionEnd):document.selection&&document.selection.createRange&&(t=document.selection.createRange(),u=0-t.duplicate().moveStart("character",-1e5),o=u+t.text.length),{begin:u,end:o})},B=function(){for(var e=b.current;e<=D.current;e++)if(c.current[e]&&f.current[e]===v(e))return!1;return!0},v=s.useCallback(function(l){return l<r.slotChar.length?r.slotChar.charAt(l):r.slotChar.charAt(0)},[r.slotChar]),F=function(){return r.unmask?M():a.current&&a.current.value},k=function(e){for(;++e<p.current&&!c.current[e];);return e},ee=function(e){for(;--e>=0&&!c.current[e];);return e},U=function(e,n){var t,u;if(!(e<0)){for(t=e,u=k(n);t<p.current;t++)if(c.current[t]){if(u<p.current&&c.current[t].test(f.current[u]))f.current[t]=f.current[u],f.current[u]=v(u);else break;u=k(u)}y(),d(Math.max(b.current,e))}},te=function(e){var n,t,u,o;for(n=e,t=v(e);n<p.current;n++)if(c.current[n])if(u=k(n),o=f.current[n],f.current[n]=t,u<p.current&&c.current[u].test(o))t=o;else break},ne=function(e){var n=a.current.value,t=d();if(t){if(j.current.length&&j.current.length>n.length){for(m(!0);t.begin>0&&!c.current[t.begin-1];)t.begin--;if(t.begin===0)for(;t.begin<b.current&&!c.current[t.begin];)t.begin++;d(t.begin,t.begin)}else{for(m(!0);t.begin<p.current&&!c.current[t.begin];)t.begin++;d(t.begin,t.begin)}r.onComplete&&B()&&r.onComplete({originalEvent:e,value:F()}),h(e)}},L=function(e){if(N.current=!1,m(),h(e),S(),r.onBlur&&r.onBlur(e),a.current.value!==O.current){var n=document.createEvent("HTMLEvents");n.initEvent("change",!0,!1),a.current.dispatchEvent(n)}},re=function(e){if(!r.readOnly){var n=e.which||e.keyCode,t,u,o;if(j.current=a.current.value,n===8||n===46||C.isIOS()&&n===127){if(t=d(),!t)return;u=t.begin,o=t.end,o-u===0&&(u=n!==46?ee(u):o=k(u-1),o=n===46?k(o):o),I(u,o),U(u,o-1),h(e),e.preventDefault()}else n===13?(L(e),h(e)):n===27&&(a.current.value=O.current,d(0,m()),h(e),e.preventDefault())}},ue=function(e){if(!r.readOnly){var n=d();if(n){var t=e.which||e.keyCode,u,o,i,_;if(!(e.ctrlKey||e.altKey||e.metaKey||t<32)){if(t&&t!==13){if(n.end-n.begin!==0&&(I(n.begin,n.end),U(n.begin,n.end-1)),u=k(n.begin-1),u<p.current&&(o=String.fromCharCode(t),c.current[u].test(o))){if(te(u),f.current[u]=o,y(),i=k(u),C.isAndroid()){var se=function(){d(i)};setTimeout(se,0)}else d(i);n.begin<=D.current&&(_=B())}e.preventDefault()}h(e),r.onComplete&&_&&r.onComplete({originalEvent:e,value:F()})}}}},I=function(e,n){var t;for(t=e;t<n&&t<p.current;t++)c.current[t]&&(f.current[t]=v(t))},y=function(){a.current&&(a.current.value=f.current.join(""))},m=function(e){X.current=!0;var n=a.current&&a.current.value,t=-1,u,o,i;for(u=0,i=0;u<p.current;u++)if(c.current[u]){for(f.current[u]=v(u);i++<n.length;)if(o=n.charAt(i-1),c.current[u].test(o)){f.current[u]=o,t=u;break}if(i>n.length){I(u+1,p.current);break}}else f.current[u]===n.charAt(i)&&i++,u<x.current&&(t=u);return e?y():t+1<x.current?r.autoClear||f.current.join("")===P.current?(a.current&&a.current.value&&(a.current.value=""),I(0,p.current)):y():(y(),a.current&&(a.current.value=a.current.value.substring(0,t+1))),x.current?u:b.current},ae=function(e){if(!r.readOnly){N.current=!0,clearTimeout(T.current);var n;a.current?O.current=a.current.value:O.current="",n=m()||0,T.current=setTimeout(function(){a.current===document.activeElement&&(y(),n===r.mask.replace("?","").length?d(0,n):d(n),S())},100),r.onFocus&&r.onFocus(e)}},oe=function(e){K.current?ne(e):q(e)},q=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!r.readOnly){if(!n){var t=m(!0);d(t)}h(e),r.onComplete&&B()&&r.onComplete({originalEvent:e,value:F()})}},M=s.useCallback(function(){for(var l=[],e=0;e<f.current.length;e++){var n=f.current[e];c.current[e]&&n!==v(e)&&l.push(n)}return l.join("")},[v]),h=function(e){if(r.onChange){var n=r.unmask?M():e&&e.target.value;r.onChange({originalEvent:e,value:P.current!==n?n:"",stopPropagation:function(){e.stopPropagation()},preventDefault:function(){e.preventDefault()},target:{name:r.name,id:r.id,value:P.current!==n?n:""}})}},S=function(){a.current&&a.current.value&&a.current.value.length>0?C.addClass(a.current,"p-filled"):C.removeClass(a.current,"p-filled")},V=function(e){var n;return a.current&&(r.value==null?a.current.value="":(a.current.value=r.value,n=m(e),setTimeout(function(){if(a.current)return y(),m(e)},10)),O.current=a.current.value),S(),n},z=s.useCallback(function(){return r.unmask?r.value!==M():P.current!==a.current.value&&a.current.value!==r.value},[r.unmask,r.value,M]),W=function(){if(r.mask){c.current=[],x.current=r.mask.length,p.current=r.mask.length,b.current=null;var e={9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"};K.current=C.isChrome()&&C.isAndroid();for(var n=r.mask.split(""),t=0;t<n.length;t++){var u=n[t];u==="?"?(p.current--,x.current=t):e[u]?(c.current.push(new RegExp(e[u])),b.current===null&&(b.current=c.current.length-1),t<x.current&&(D.current=c.current.length-1)):c.current.push(null)}f.current=[];for(var o=0;o<n.length;o++){var i=n[o];i!=="?"&&(e[i]?f.current.push(v(o)):f.current.push(i))}P.current=f.current.join("")}};s.useImperativeHandle(g,function(){return{props:r,focus:function(){return C.focus(a.current)},getElement:function(){return a.current}}}),s.useEffect(function(){fe.combinedRefs(a,g)},[a,g]),de(function(){W(),V()}),H(function(){W(),d(V(!0)),r.unmask&&h()},[r.mask]),H(function(){z()&&V()},[z]);var le=Z.getOtherProps(r),ie=pe("p-inputmask",r.className);return s.createElement(ve,A({ref:a,autoFocus:r.autoFocus,id:r.id,type:r.type,name:r.name,style:r.style,className:ie},le,{placeholder:r.placeholder,size:r.size,maxLength:r.maxLength,tabIndex:r.tabIndex,disabled:r.disabled,readOnly:r.readOnly,onFocus:ae,onBlur:L,onKeyDown:re,onKeyPress:ue,onInput:oe,onPaste:function(e){return q(e,!0)},required:r.required,tooltip:r.tooltip,tooltipOptions:r.tooltipOptions,pt:r.pt,unstyled:r.unstyled,__parentMetadata:{parent:$}}))}));Q.displayName="InputMask";const Ie={title:"Form/InputMask",component:Q,parameters:{layout:"centered"},argTypes:{autoClear:{control:"boolean",description:"Clears the incomplete value on blur.",options:null},children:{control:"text",description:"Used to get the child elements of the component.",options:null},disabled:{control:"boolean",description:"When present, it specifies that the element value cannot be altered.",options:null},keyfilter:{control:"object",description:"Format definition of the keys to block.",options:null},mask:{control:"text",description:"Mask pattern.",options:null},pt:{control:"object",description:"Uses to pass attributes to DOM elements inside the component.",options:null},ptOptions:{control:"object",description:"Used to configure passthrough(pt) options of the component.",options:null},readOnly:{control:"boolean",description:"When present, it specifies that an input field is read-only.",options:null},required:{control:"boolean",description:"When present, it specifies that the element must be filled out before submitting the form.",options:null},slotChar:{control:"text",description:"Placeholder character in mask.",options:null},tooltip:{control:"text",description:"Content of the tooltip.",options:null},tooltipOptions:{control:"object",description:"Configuration of the tooltip, refer to the tooltip documentation for more information.",options:null},unmask:{control:"boolean",description:"Defines if model sets the raw unmasked value to bound value or the formatted mask value.",options:null},unstyled:{control:"boolean",description:"When enabled, it removes component related styles in the core.",options:null},validateOnly:{control:"boolean",description:"When enabled, instead of blocking keys, input is validated internally to test against the regular expression.",options:null},value:{control:"text",description:"The value of component",options:null}}},w={args:{value:0,unstyled:!1}};var Y,G,J;w.parameters={...w.parameters,docs:{...(Y=w.parameters)==null?void 0:Y.docs,source:{originalSource:`{
  args: {
    "value": 0,
    "unstyled": false
  }
}`,...(J=(G=w.parameters)==null?void 0:G.docs)==null?void 0:J.source}}};const Me=["Default"];export{w as Default,Me as __namedExportsOrder,Ie as default};
