import{r as u}from"./index-76fb7be0.js";import{a as Ie,O as h,D as p,c as U,Z as ie,P as be}from"./api.esm-4644ee78.js";import{C as Re,u as _e}from"./componentbase.esm-1c796d7e.js";import{C as ct}from"./csstransition.esm-f87c8556.js";import{d as je,i as pt,b as he,c as ft}from"./hooks.esm-d069ba29.js";import{K as le}from"./keyfilter.esm-59cdc628.js";import{T as dt}from"./tooltip.esm-2acddad6.js";import{O as mt}from"./overlayservice.esm-582e1694.js";import{P as yt}from"./portal.esm-16954874.js";import{R as vt}from"./ripple.esm-1f3221bd.js";import"./_commonjsHelpers-de833af9.js";import"./inheritsLoose-9eefaa95.js";import"./index-d3ea75b5.js";function G(){return G=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},G.apply(this,arguments)}function se(t,n){(n==null||n>t.length)&&(n=t.length);for(var r=0,i=new Array(n);r<n;r++)i[r]=t[r];return i}function gt(t){if(Array.isArray(t))return se(t)}function bt(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Ce(t,n){if(t){if(typeof t=="string")return se(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return se(t,n)}}function ht(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function q(t){return gt(t)||bt(t)||Ce(t)||ht()}function M(t){"@babel/helpers - typeof";return M=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},M(t)}function St(t,n){if(M(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var i=r.call(t,n||"default");if(M(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(t)}function xt(t){var n=St(t,"string");return M(n)==="symbol"?n:String(n)}function Te(t,n,r){return n=xt(n),n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function Ot(t){if(Array.isArray(t))return t}function wt(t,n){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var i,e,P,O,S=[],E=!0,C=!1;try{if(P=(r=r.call(t)).next,n===0){if(Object(r)!==r)return;E=!1}else for(;!(E=(i=P.call(r)).done)&&(S.push(i.value),S.length!==n);E=!0);}catch(T){C=!0,e=T}finally{try{if(!E&&r.return!=null&&(O=r.return(),Object(O)!==O))return}finally{if(C)throw e}}return S}}function Pt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function F(t,n){return Ot(t)||wt(t,n)||Ce(t,n)||Pt()}var Et={root:function(n){var r=n.props,i=n.isFilled;return U("p-inputtextarea p-inputtext p-component",{"p-disabled":r.disabled,"p-filled":i,"p-inputtextarea-resizable":r.autoResize},r.className)}},It=`
@layer primereact {
    .p-inputtextarea-resizable {
        overflow: hidden;
        resize: none;
    }
    
    .p-fluid .p-inputtextarea {
        width: 100%;
    }
}
`,J=Re.extend({defaultProps:{__TYPE:"InputTextarea",__parentMetadata:null,autoResize:!1,keyfilter:null,onBlur:null,onFocus:null,onBeforeInput:null,onInput:null,onKeyDown:null,onKeyUp:null,onPaste:null,tooltip:null,tooltipOptions:null,validateOnly:!1,children:void 0},css:{classes:Et,styles:It}});function Se(t,n){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);n&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,i)}return r}function xe(t){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?Se(Object(r),!0).forEach(function(i){Te(t,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Se(Object(r)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(r,i))})}return t}var ke=u.memo(u.forwardRef(function(t,n){var r=je(),i=u.useContext(Ie),e=J.getProps(t,i),P=u.useRef(n),O=u.useRef(0),S=J.setMetaData(xe(xe({props:e},e.__parentMetadata),{},{context:{disabled:e.disabled}})),E=S.ptm,C=S.cx,T=S.isUnstyled;_e(J.css.styles,T,{name:"inputtextarea"});var z=function(d){e.autoResize&&_(),e.onFocus&&e.onFocus(d)},$=function(d){e.autoResize&&_(),e.onBlur&&e.onBlur(d)},Q=function(d){e.autoResize&&_(),e.onKeyUp&&e.onKeyUp(d)},V=function(d){e.onKeyDown&&e.onKeyDown(d),e.keyfilter&&le.onKeyPress(d,e.keyfilter,e.validateOnly)},L=function(d){e.onBeforeInput&&e.onBeforeInput(d),e.keyfilter&&le.onBeforeInput(d,e.keyfilter,e.validateOnly)},N=function(d){e.onPaste&&e.onPaste(d),e.keyfilter&&le.onPaste(d,e.keyfilter,e.validateOnly)},ee=function(d){var c=d.target;e.autoResize&&_(h.isEmpty(c.value)),e.onInput&&e.onInput(d),h.isNotEmpty(c.value)?p.addClass(c,"p-filled"):p.removeClass(c,"p-filled")},_=function(d){var c=P.current;c&&p.isVisible(c)&&(O.current||(O.current=c.scrollHeight,c.style.overflow="hidden"),(O.current!==c.scrollHeight||d)&&(c.style.height="",c.style.height=c.scrollHeight+"px",parseFloat(c.style.height)>=parseFloat(c.style.maxHeight)?(c.style.overflowY="scroll",c.style.height=c.style.maxHeight):c.style.overflow="hidden",O.current=c.scrollHeight))};u.useEffect(function(){h.combinedRefs(P,n)},[P,n]),u.useEffect(function(){e.autoResize&&_(!0)},[e.autoResize]);var y=u.useMemo(function(){return h.isNotEmpty(e.value)||h.isNotEmpty(e.defaultValue)},[e.value,e.defaultValue]),W=h.isNotEmpty(e.tooltip),te=r({ref:P,className:C("root",{isFilled:y}),onFocus:z,onBlur:$,onKeyUp:Q,onKeyDown:V,onBeforeInput:L,onInput:ee,onPaste:N},J.getOtherProps(e),E("root"));return u.createElement(u.Fragment,null,u.createElement("textarea",te),W&&u.createElement(dt,G({target:P,content:e.tooltip},e.tooltipOptions,{pt:E("tooltip")})))}));ke.displayName="InputTextarea";var Rt={item:function(n){var r=n.isSelected;return U("p-mention-item",{"p-highlight":r})},items:"p-mention-items",panel:function(n){var r=n.props;return U("p-mention-panel p-component",r.panelClassName)},input:function(n){var r=n.props;return U("p-mention-input",r.inputClassName)},root:function(n){var r=n.props,i=n.isFilled,e=n.focusedState;return U("p-mention p-component p-inputwrapper",{"p-inputwrapper-filled":i,"p-inputwrapper-focus":e},r.className)},transition:"p-connected-overlay"},_t=`
@layer primereact {
    .p-mention {
        display: inline-flex;
        position: relative;
    }
    
    .p-autocomplete-loader {
        position: absolute;
        top: 50%;
        margin-top: -.5rem;
    }
    
    .p-mention .p-mention-panel {
        min-width: 100%;
    }
    
    .p-mention-panel {
        position: absolute;
        top: 0;
        left: 0;
        overflow: auto;
    }
    
    .p-mention-items {
        margin: 0;
        padding: 0;
        list-style-type: none;
    }
    
    .p-mention-item {
        cursor: pointer;
        white-space: nowrap;
        position: relative;
        overflow: hidden;
    }
    
    .p-fluid .p-mention {
        display: flex;
    }
}
`,K=Re.extend({defaultProps:{__TYPE:"Mention",autoHighlight:!0,className:null,delay:0,field:null,footerTemplate:null,headerTemplate:null,id:null,inputClassName:null,inputId:null,inputRef:null,inputStyle:null,itemTemplate:null,panelClassName:null,panelStyle:null,scrollHeight:"200px",style:null,suggestions:null,transitionOptions:null,trigger:"@",onBlur:null,onChange:null,onFocus:null,onHide:null,onInput:null,onSearch:null,onSelect:null,onShow:null,children:void 0},css:{classes:Rt,styles:_t}});function Oe(t,n){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);n&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,i)}return r}function X(t){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?Oe(Object(r),!0).forEach(function(i){Te(t,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Oe(Object(r)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(r,i))})}return t}var De=u.memo(u.forwardRef(function(t,n){var r=je(),i=u.useContext(Ie),e=K.getProps(t,i),P=u.useState(!1),O=F(P,2),S=O[0],E=O[1],C=u.useState(!1),T=F(C,2),z=T[0],$=T[1],Q=u.useState(!1),V=F(Q,2),L=V[0],N=V[1],ee=u.useState(null),_=F(ee,2),y=_[0],W=_[1],te=u.useState([]),I=F(te,2),d=I[0],c=I[1],w=u.useRef(null),g=u.useRef(null),b=u.useRef(e.inputRef),Fe=u.useRef(null),ne=u.useRef(null),ue={props:e,state:{overlayVisible:S,focused:z,searching:L,trigger:y}},Z=K.setMetaData(ue),k=Z.ptm,D=Z.cx;Z.sx;var re=Z.isUnstyled;_e(K.css.styles,re,{name:"mention"});var Ne=function(o,a,l){return k(a,{context:{trigger:y?y.key:""},state:X({},l)})},Ae=pt({target:w,overlay:g,listener:function(o,a){var l=a.valid;l&&j()},when:S}),ce=F(Ae,2),Be=ce[0],He=ce[1],pe=function(){E(!0)},j=function(){E(!1),N(!1),W(null)},Ke=function(){ie.set("overlay",g.current,i&&i.autoZIndex||be.autoZIndex,i&&i.zIndex.overlay||be.zIndex.overlay),p.addStyles(g.current,{position:"absolute",top:"0",left:"0"}),fe()},Ue=function(){e.autoHighlight&&e.suggestions&&e.suggestions.length&&c(function(o){var a=q(o);return a[0]=!0,a})},Me=function(){Be(),e.onShow&&e.onShow()},ze=function(){He()},$e=function(){ie.clear(g.current),e.onHide&&e.onHide()},fe=function(){if(y){var o=y.key,a=y.index,l=b.current.value,f=p.getCursorOffset(b.current,l.substring(0,a-1),l.substring(a),o);g.current.style.transformOrigin="top",g.current.style.left="calc(".concat(f.left,"px + 1rem)"),g.current.style.top="calc(".concat(f.top,"px + 1.2rem)")}},Ve=function(o){mt.emit("overlay-click",{originalEvent:o,target:w.current})},Le=function(o,a,l){if(!y){var f=Array.isArray(e.trigger)?e.trigger.find(function(x){return x===a}):e.trigger===a?e.trigger:null;if(f)return{key:f,index:l};var v=o.substring(0,l).lastIndexOf(" "),m=We(o,l);if(m.index>v)return m}return y},We=function(o,a){if(Array.isArray(e.trigger)){var l={};return e.trigger.forEach(function(v){var m=o.substring(0,a).lastIndexOf(v);m!==-1&&(m>l.index||!l.index)&&(l={key:v,index:m!==-1?m+1:-1})}),l}var f=o.substring(0,a).lastIndexOf(e.trigger);return{key:e.trigger,index:f!==-1?f+1:-1}},de=function(o){ne.current&&clearTimeout(ne.current);var a=o.target,l=a.value,f=a.selectionStart,v=l.substring(f-1,f);if(v===" "){j();return}var m=Le(l,v,f);if(m&&m.index>-1){var x=l.substring(m.index,f);ne.current=setTimeout(function(){Ze(o,x,m)},e.delay)}},Ze=function(o,a,l){e.onSearch&&(N(!0),W(l),e.onSearch({originalEvent:o,trigger:l.key,query:a}))},me=function(o,a){var l=b.current.value,f=o.target.selectionStart,v=l.indexOf(" ",y.index),m=l.substring(y.index,v>-1?v:f),x=ye(a).replace(/\s+/g,"");if(m.trim()!==x){var A=l.substring(0,y.index),ae=l.substring(v>-1?f:y.index+m.length);b.current.value="".concat(A).concat(x," ").concat(ae),o.target=b.current,e.onChange&&e.onChange(o)}var B=y.index+x.length+1;b.current.setSelectionRange(B,B),j(),e.onSelect&&e.onSelect({originalEvent:o,suggestion:a})},ye=function(o){if(o){var a=Array.isArray(e.field)?e.field[e.trigger.findIndex(function(l){return l===y.key})]:e.field;return a?h.resolveFieldData(o,a):o}return""},qe=function(o,a){p.focus(b.current),me(o,a)},Je=function(o){$(!0),e.onFocus&&e.onFocus(o)},Xe=function(o){$(!1),e.onBlur&&e.onBlur(o)},Ye=function(o){e.onInput&&e.onInput(o);var a=o.target.value.length>0;re()?p.setAttributes(w.current,{"data-p-inputwrapper-filled":a}):a?p.addClass(w.current,"p-inputwrapper-filled"):p.removeClass(w.current,"p-inputwrapper-filled")},Ge=function(o){(o.which===37||o.which===39)&&de(o)},Qe=function(o){e.onChange&&e.onChange(o),de(o)},et=function(o){if(S){var a=p.findSingle(g.current,'li[data-p-highlight="true"]');switch(o.which){case 40:if(a){var l=a.nextElementSibling;if(l){var f=p.index(l),v=p.index(a);c(function(H){var R=q(H);return R[f]=!0,R[v]=!1,R}),p.scrollInView(g.current,l)}}else if(a=p.findSingle(g.current,"li"),a){var m=p.index(a);c(function(H){var R=q(H);return R[m]=!0,R})}o.preventDefault();break;case 38:if(a){var x=a.previousElementSibling;if(x){var A=p.index(x),ae=p.index(a);c(function(H){var R=q(H);return R[A]=!0,R[ae]=!1,R}),p.scrollInView(g.current,x)}}o.preventDefault();break;case 8:var B=o.target,st=B.value,ge=B.selectionStart,ut=st.substring(ge-1,ge);ut===y.key&&j();break;case 13:a&&me(o,e.suggestions[p.index(a)]),o.preventDefault();break;case 27:j(),o.preventDefault();break}}},ve=b.current&&b.current.value,oe=u.useMemo(function(){return h.isNotEmpty(e.value)||h.isNotEmpty(e.defaultValue)||h.isNotEmpty(ve)},[e.value,e.defaultValue,ve]);u.useImperativeHandle(n,function(){return{props:e,show:pe,hide:j,focus:function(){return p.focus(b.current)},getElement:function(){return w.current},getOverlay:function(){return g.current},getInput:function(){return b.current}}}),u.useEffect(function(){h.combinedRefs(b,e.inputRef)},[b,e.inputRef]),he(function(){var s=e.suggestions&&e.suggestions.length;if(s){var o=e.suggestions.map(function(){return!1});c(o)}L&&(s?pe():j(),S&&fe(),N(!1))},[e.suggestions]),he(function(){var s=re(),o=s?p.isAttributeEquals(w.current,"data-p-inputwrapper-filled",!0):p.hasClass(w.current,"p-inputwrapper-filled");!oe&&o&&(s?p.setAttributes(w.current,{"data-p-inputwrapper-filled":!1}):p.removeClass(w.current,"p-inputwrapper-filled"))},[oe]),ft(function(){ie.clear(g.current)});var tt=function(o,a){var l=a+"_item",f=e.itemTemplate?h.getJSXElement(e.itemTemplate,o,{trigger:y?y.key:"",index:a}):ye(o),v=d[a],m=r({key:l,className:D("item",{isSelected:v}),onClick:function(A){return qe(A,o)},"data-p-highlight":v},Ne(o,"item",{selected:v}));return u.createElement("li",m,f,u.createElement(vt,null))},nt=function(){var o=r({ref:Fe,className:D("items")},k("items"));if(e.suggestions){var a=e.suggestions.map(tt);return u.createElement("ul",o,a)}return null},rt=function(){var o=h.getJSXElement(e.headerTemplate,e),a=h.getJSXElement(e.footerTemplate,e),l=nt(),f=r({ref:g,className:D("panel"),style:X({maxHeight:e.scrollHeight},e.panelStyle),onClick:Ve},k("panel")),v=r({classNames:D("transition"),in:S,timeout:{enter:120,exit:100},options:e.transitionOptions,unmountOnExit:!0,onEnter:Ke,onEntering:Ue,onEntered:Me,onExit:ze,onExited:$e},k("transition")),m=u.createElement(ct,G({nodeRef:g},v),u.createElement("div",f,o,l,a));return u.createElement(yt,{element:m,appendTo:"self"})},ot=K.getOtherProps(e),at=rt(),it=r(X(X({ref:b,id:e.inputId,className:D("input"),style:e.inputStyle},ot),{},{onFocus:Je,onBlur:Xe,onKeyDown:et,onInput:Ye,onKeyUp:Ge,onChange:Qe,__parentMetadata:{parent:ue}}),k("input")),lt=r({ref:w,id:e.id,className:D("root",{focusedState:z,isFilled:oe}),style:e.style},K.getOtherProps(e),k("root"));return u.createElement("div",lt,u.createElement(ke,it),at)}));De.displayName="Mention";const zt={title:"Form/Mention",component:De,parameters:{layout:"centered"},argTypes:{autoHighlight:{control:"boolean",description:"When enabled, highlights the first item in the list by default.",options:null},autoResize:{control:"boolean",description:"When present, height of textarea changes as being typed.",options:null},children:{control:"text",description:"Used to get the child elements of the component.",options:null},delay:{control:"number",description:"Delay between keystrokes to wait before sending a query.",options:null},field:{control:"select",description:"Field of a suggested object to resolve and display.",options:["string","string[]"]},footerTemplate:{control:"text",description:"Custom template of footer.",options:null},headerTemplate:{control:"text",description:"Custom template of header.",options:null},inputClassName:{control:"text",description:"Style class of the input field.",options:null},inputId:{control:"text",description:"Identifier of the input element.",options:null},inputRef:{control:"object",description:"Reference of the input element.",options:null},inputStyle:{control:"object",description:"Inline style of the input field.",options:null},itemTemplate:{control:"text",description:"Custom template for the items.",options:null},panelClassName:{control:"text",description:"Style class of the overlay panel element.",options:null},panelStyle:{control:"object",description:"Inline style of the overlay panel element.",options:null},pt:{control:"object",description:"Uses to pass attributes to DOM elements inside the component.",options:null},ptOptions:{control:"object",description:"Used to configure passthrough(pt) options of the component.",options:null},scrollHeight:{control:"text",description:"Maximum height of the suggestions panel.",options:null},suggestions:{control:"object",description:"An array of suggestions to display.",options:null},transitionOptions:{control:"object",description:'The properties of CSSTransition can be customized, except for "nodeRef" and "in" properties.',options:null},trigger:{control:"select",description:"Set trigger keyword.",options:["string","string[]"]},unstyled:{control:"boolean",description:"When enabled, it removes component related styles in the core.",options:null}}},Y={args:{unstyled:!1}};var we,Pe,Ee;Y.parameters={...Y.parameters,docs:{...(we=Y.parameters)==null?void 0:we.docs,source:{originalSource:`{
  args: {
    "unstyled": false
  }
}`,...(Ee=(Pe=Y.parameters)==null?void 0:Pe.docs)==null?void 0:Ee.source}}};const $t=["Default"];export{Y as Default,$t as __namedExportsOrder,zt as default};
