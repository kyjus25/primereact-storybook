import{r as l}from"./index-76fb7be0.js";import{P as ve,O as h,D as d,m as I,c as $,Z as q,b as se}from"./api.esm-2e2d159c.js";import{C as he,u as be}from"./componentbase.esm-b0caea1e.js";import{C as Ge}from"./csstransition.esm-653f5084.js";import{h as Qe,d as et,e as ue,f as tt}from"./hooks.esm-c93f10ee.js";import{K as G}from"./keyfilter.esm-d0e9408b.js";import{T as nt}from"./tooltip.esm-ca4db4c1.js";import{O as rt}from"./overlayservice.esm-07429284.js";import{P as ot}from"./portal.esm-c66f0cf3.js";import{R as it}from"./ripple.esm-cba91116.js";import"./_commonjsHelpers-de833af9.js";import"./inheritsLoose-9eefaa95.js";import"./index-d3ea75b5.js";function V(){return V=Object.assign?Object.assign.bind():function(n){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(n[e]=r[e])}return n},V.apply(this,arguments)}function N(n){"@babel/helpers - typeof";return N=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},N(n)}function at(n,t){if(N(n)!=="object"||n===null)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var e=r.call(n,t||"default");if(N(e)!=="object")return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(n)}function lt(n){var t=at(n,"string");return N(t)==="symbol"?t:String(t)}function Oe(n,t,r){return t=lt(t),t in n?Object.defineProperty(n,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[t]=r,n}function st(n){if(Array.isArray(n))return n}function ut(n,t){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var e,v,x,b,w=[],P=!0,C=!1;try{if(x=(r=r.call(n)).next,t===0){if(Object(r)!==r)return;P=!1}else for(;!(P=(e=x.call(r)).done)&&(w.push(e.value),w.length!==t);P=!0);}catch(j){C=!0,v=j}finally{try{if(!P&&r.return!=null&&(b=r.return(),Object(b)!==b))return}finally{if(C)throw v}}return w}}function ce(n,t){(t==null||t>n.length)&&(t=n.length);for(var r=0,e=new Array(t);r<t;r++)e[r]=n[r];return e}function ct(n,t){if(n){if(typeof n=="string")return ce(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);if(r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set")return Array.from(n);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ce(n,t)}}function pt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function D(n,t){return st(n)||ut(n,t)||ct(n,t)||pt()}var ft={root:function(t){var r=t.props,e=t.isFilled;return $("p-inputtextarea p-inputtext p-component",{"p-disabled":r.disabled,"p-filled":e,"p-inputtextarea-resizable":r.autoResize},r.className)}},dt=`
@layer primereact {
    .p-inputtextarea-resizable {
        overflow: hidden;
        resize: none;
    }
    
    .p-fluid .p-inputtextarea {
        width: 100%;
    }
}
`,z=he.extend({defaultProps:{__TYPE:"InputTextarea",__parentMetadata:null,autoResize:!1,keyfilter:null,onBlur:null,onFocus:null,onBeforeInput:null,onInput:null,onKeyDown:null,onKeyUp:null,onPaste:null,tooltip:null,tooltipOptions:null,validateOnly:!1,children:void 0},css:{classes:ft,styles:dt}});function pe(n,t){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(n);t&&(e=e.filter(function(v){return Object.getOwnPropertyDescriptor(n,v).enumerable})),r.push.apply(r,e)}return r}function fe(n){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pe(Object(r),!0).forEach(function(e){Oe(n,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):pe(Object(r)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(r,e))})}return n}var xe=l.memo(l.forwardRef(function(n,t){var r=l.useContext(ve),e=z.getProps(n,r),v=l.useRef(t),x=l.useRef(0),b=z.setMetaData(fe(fe({props:e},e.__parentMetadata),{},{context:{disabled:e.disabled}})),w=b.ptm,P=b.cx,C=b.isUnstyled;be(z.css.styles,C,{name:"inputtextarea"});var j=function(s){e.autoResize&&E(),e.onFocus&&e.onFocus(s)},B=function(s){e.autoResize&&E(),e.onBlur&&e.onBlur(s)},L=function(s){e.autoResize&&E(),e.onKeyUp&&e.onKeyUp(s)},K=function(s){e.onKeyDown&&e.onKeyDown(s),e.keyfilter&&G.onKeyPress(s,e.keyfilter,e.validateOnly)},H=function(s){e.onBeforeInput&&e.onBeforeInput(s),e.keyfilter&&G.onBeforeInput(s,e.keyfilter,e.validateOnly)},k=function(s){e.onPaste&&e.onPaste(s),e.keyfilter&&G.onPaste(s,e.keyfilter,e.validateOnly)},W=function(s){var f=s.target;e.autoResize&&E(h.isEmpty(f.value)),e.onInput&&e.onInput(s),h.isNotEmpty(f.value)?d.addClass(f,"p-filled"):d.removeClass(f,"p-filled")},E=function(s){var f=v.current;f&&d.isVisible(f)&&(x.current||(x.current=f.scrollHeight,f.style.overflow="hidden"),(x.current!==f.scrollHeight||s)&&(f.style.height="",f.style.height=f.scrollHeight+"px",parseFloat(f.style.height)>=parseFloat(f.style.maxHeight)?(f.style.overflowY="scroll",f.style.height=f.style.maxHeight):f.style.overflow="hidden",x.current=f.scrollHeight))};l.useEffect(function(){h.combinedRefs(v,t)},[v,t]),l.useEffect(function(){e.autoResize&&E(!0)},[e.autoResize]);var y=l.useMemo(function(){return h.isNotEmpty(e.value)||h.isNotEmpty(e.defaultValue)},[e.value,e.defaultValue]),U=h.isNotEmpty(e.tooltip),S=I({ref:v,className:P("root",{isFilled:y}),onFocus:j,onBlur:B,onKeyUp:L,onKeyDown:K,onBeforeInput:H,onInput:W,onPaste:k},z.getOtherProps(e),w("root"));return l.createElement(l.Fragment,null,l.createElement("textarea",S),U&&l.createElement(nt,V({target:v,content:e.tooltip},e.tooltipOptions,{pt:w("tooltip")})))}));xe.displayName="InputTextarea";var mt={item:"p-mention-item",items:"p-mention-items",panel:function(t){var r=t.props;return $("p-mention-panel p-component",r.panelClassName)},input:function(t){var r=t.props;return $("p-mention-input",r.inputClassName)},root:function(t){var r=t.props,e=t.isFilled,v=t.focusedState;return $("p-mention p-component p-inputwrapper",{"p-inputwrapper-filled":e,"p-inputwrapper-focus":v},r.className)},transition:"p-connected-overlay"},yt=`
@layer primereact {
    .p-mention {
        display: inline-flex;
        position: relative;
    }
    
    .p-autocomplete-loader {
        position: absolute;
        top: 50%;
        margin-top: -.5rem;
    }
    
    .p-mention .p-mention-panel {
        min-width: 100%;
    }
    
    .p-mention-panel {
        position: absolute;
        top: 0;
        left: 0;
        overflow: auto;
    }
    
    .p-mention-items {
        margin: 0;
        padding: 0;
        list-style-type: none;
    }
    
    .p-mention-item {
        cursor: pointer;
        white-space: nowrap;
        position: relative;
        overflow: hidden;
    }
    
    .p-fluid .p-mention {
        display: flex;
    }
}
`,F=he.extend({defaultProps:{__TYPE:"Mention",autoHighlight:!0,className:null,delay:0,field:null,footerTemplate:null,headerTemplate:null,id:null,inputClassName:null,inputId:null,inputRef:null,inputStyle:null,itemTemplate:null,panelClassName:null,panelStyle:null,scrollHeight:"200px",style:null,suggestions:null,transitionOptions:null,trigger:"@",onBlur:null,onChange:null,onFocus:null,onHide:null,onInput:null,onSearch:null,onSelect:null,onShow:null,children:void 0},css:{classes:mt,styles:yt}});function de(n,t){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(n);t&&(e=e.filter(function(v){return Object.getOwnPropertyDescriptor(n,v).enumerable})),r.push.apply(r,e)}return r}function Q(n){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?de(Object(r),!0).forEach(function(e){Oe(n,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):de(Object(r)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(r,e))})}return n}var Se=l.memo(l.forwardRef(function(n,t){var r=l.useContext(ve),e=F.getProps(n,r),v=l.useState(!1),x=D(v,2),b=x[0],w=x[1],P=l.useState(!1),C=D(P,2),j=C[0],B=C[1],L=l.useState(!1),K=D(L,2),H=K[0],k=K[1],W=l.useState(null),E=D(W,2),y=E[0],U=E[1],S=l.useRef(null),p=l.useRef(null),s=l.useRef(e.inputRef),f=l.useRef(null),Z=l.useRef(null),ee={props:e,state:{overlayVisible:b,focused:j,searching:H,trigger:y}},M=F.setMetaData(ee),T=M.ptm,_=M.cx;M.sx;var we=M.isUnstyled;be(F.css.styles,we,{name:"mention"});var Pe=function(o,i){return T(i,{context:{trigger:y?y.key:""}})},Ee=Qe({target:S,overlay:p,listener:function(o,i){var a=i.valid;a&&R()},when:b}),te=D(Ee,2),Ce=te[0],Re=te[1],ne=function(){w(!0)},R=function(){w(!1),k(!1),U(null)},Ie=function(){q.set("overlay",p.current,r&&r.autoZIndex||se.autoZIndex,r&&r.zIndex.overlay||se.zIndex.overlay),d.addStyles(p.current,{position:"absolute",top:"0",left:"0"}),J()},je=function(){e.autoHighlight&&e.suggestions&&e.suggestions.length&&d.addClass(f.current.firstChild,"p-highlight")},Te=function(){Ce(),e.onShow&&e.onShow()},_e=function(){Re()},ke=function(){q.clear(p.current),e.onHide&&e.onHide()},J=function(){var o=y.key,i=y.index,a=s.current.value,c=d.getCursorOffset(s.current,a.substring(0,i-1),a.substring(i),o);p.current.style.transformOrigin="top",p.current.style.left="calc(".concat(c.left,"px + 1rem)"),p.current.style.top="calc(".concat(c.top,"px + 1.2rem)")},De=function(o){rt.emit("overlay-click",{originalEvent:o,target:S.current})},Fe=function(o,i,a){if(!y){var c=Array.isArray(e.trigger)?e.trigger.find(function(O){return O===i}):e.trigger===i?e.trigger:null;if(c)return{key:c,index:a};var g=o.substring(0,a).lastIndexOf(" "),m=Ne(o,a);if(m.index>g)return m}return y},Ne=function(o,i){if(Array.isArray(e.trigger)){var a={};return e.trigger.forEach(function(g){var m=o.substring(0,i).lastIndexOf(g);m!==-1&&(m>a.index||!a.index)&&(a={key:g,index:m!==-1?m+1:-1})}),a}var c=o.substring(0,i).lastIndexOf(e.trigger);return{key:e.trigger,index:c!==-1?c+1:-1}},re=function(o){Z.current&&clearTimeout(Z.current);var i=o.target,a=i.value,c=i.selectionStart,g=a.substring(c-1,c);if(g===" "){R();return}var m=Fe(a,g,c);if(m&&m.index>-1){var O=a.substring(m.index,c);Z.current=setTimeout(function(){Be(o,O,m)},e.delay)}},Be=function(o,i,a){e.onSearch&&(k(!0),U(a),e.onSearch({originalEvent:o,trigger:a.key,query:i}))},oe=function(o,i){var a=s.current.value,c=o.target.selectionStart,g=a.indexOf(" ",y.index),m=a.substring(y.index,g>-1?g:c),O=ie(i).replace(/\s+/g,"");if(m.trim()!==O){var Y=a.substring(0,y.index),qe=a.substring(g>-1?c:y.index+m.length);s.current.value="".concat(Y).concat(O," ").concat(qe),o.target=s.current,e.onChange&&e.onChange(o)}var le=y.index+O.length+1;s.current.setSelectionRange(le,le),R(),e.onSelect&&e.onSelect({originalEvent:o,suggestion:i})},ie=function(o){if(o){var i=Array.isArray(e.field)?e.field[e.trigger.findIndex(function(a){return a===y.key})]:e.field;return i?h.resolveFieldData(o,i):o}return""},Ke=function(o,i){d.focus(s.current),oe(o,i)},He=function(o){B(!0),e.onFocus&&e.onFocus(o)},Ue=function(o){B(!1),e.onBlur&&e.onBlur(o)},Me=function(o){e.onInput&&e.onInput(o),o.target.value.length>0?d.addClass(S.current,"p-inputwrapper-filled"):d.removeClass(S.current,"p-inputwrapper-filled")},ze=function(o){(o.which===37||o.which===39)&&re(o)},Ae=function(o){e.onChange&&e.onChange(o),re(o)},$e=function(o){if(b){var i=d.findSingle(p.current,"li.p-highlight");switch(o.which){case 40:if(i){var a=i.nextElementSibling;a&&(d.addClass(a,"p-highlight"),d.removeClass(i,"p-highlight"),d.scrollInView(p.current,a))}else i=d.findSingle(p.current,"li"),i&&d.addClass(i,"p-highlight");o.preventDefault();break;case 38:if(i){var c=i.previousElementSibling;c&&(d.addClass(c,"p-highlight"),d.removeClass(i,"p-highlight"),d.scrollInView(p.current,c))}o.preventDefault();break;case 8:var g=o.target,m=g.value,O=g.selectionStart,Y=m.substring(O-1,O);Y===y.key&&R();break;case 13:i&&oe(o,e.suggestions[d.index(i)]),o.preventDefault();break;case 27:R(),o.preventDefault();break}}},ae=s.current&&s.current.value,X=l.useMemo(function(){return h.isNotEmpty(e.value)||h.isNotEmpty(e.defaultValue)||h.isNotEmpty(ae)},[e.value,e.defaultValue,ae]);l.useImperativeHandle(t,function(){return{props:e,show:ne,hide:R,focus:function(){return d.focus(s.current)},getElement:function(){return S.current},getOverlay:function(){return p.current},getInput:function(){return s.current}}}),l.useEffect(function(){h.combinedRefs(s,e.inputRef)},[s,e.inputRef]),et(function(){J()}),ue(function(){H&&(e.suggestions&&e.suggestions.length?ne():R(),b&&J(),k(!1))},[e.suggestions]),ue(function(){!X&&d.hasClass(S.current,"p-inputwrapper-filled")&&d.removeClass(S.current,"p-inputwrapper-filled")},[X]),tt(function(){q.clear(p.current)});var Ve=function(o,i){var a=i+"_item",c=e.itemTemplate?h.getJSXElement(e.itemTemplate,o,{trigger:y?y.key:"",index:i}):ie(o),g=I({key:a,className:_("item"),onClick:function(O){return Ke(O,o)}},Pe(o,"item"));return l.createElement("li",g,c,l.createElement(it,null))},Le=function(){var o=I({ref:f,className:_("items")},T("items"));if(e.suggestions){var i=e.suggestions.map(Ve);return l.createElement("ul",o,i)}return null},We=function(){var o=h.getJSXElement(e.headerTemplate,e),i=h.getJSXElement(e.footerTemplate,e),a=Le(),c=I({ref:p,className:_("panel"),style:Q({maxHeight:e.scrollHeight},e.panelStyle),onClick:De},T("panel")),g=I({classNames:_("transition"),in:b,timeout:{enter:120,exit:100},options:e.transitionOptions,unmountOnExit:!0,onEnter:Ie,onEntering:je,onEntered:Te,onExit:_e,onExited:ke},T("transition")),m=l.createElement(Ge,V({nodeRef:p},g),l.createElement("div",c,o,a,i));return l.createElement(ot,{element:m,appendTo:"self"})},Ze=F.getOtherProps(e),Je=We(),Xe=I(Q(Q({ref:s,id:e.inputId,className:_("input"),style:e.inputStyle},Ze),{},{onFocus:He,onBlur:Ue,onKeyDown:$e,onInput:Me,onKeyUp:ze,onChange:Ae,__parentMetadata:{parent:ee}}),T("input")),Ye=I({ref:S,id:e.id,className:_("root",{focusedState:j,isFilled:X}),style:e.style},F.getOtherProps(e),T("root"));return l.createElement("div",Ye,l.createElement(xe,Xe),Je)}));Se.displayName="Mention";const jt={title:"Form/Mention",component:Se,parameters:{layout:"centered"},argTypes:{autoHighlight:{control:"boolean",description:"When enabled, highlights the first item in the list by default.",options:null},autoResize:{control:"boolean",description:"When present, height of textarea changes as being typed.",options:null},children:{control:"text",description:"Used to get the child elements of the component.",options:null},delay:{control:"number",description:"Delay between keystrokes to wait before sending a query.",options:null},field:{control:"select",description:"Field of a suggested object to resolve and display.",options:["string","string[]"]},footerTemplate:{control:"text",description:"Custom template of footer.",options:null},headerTemplate:{control:"text",description:"Custom template of header.",options:null},inputClassName:{control:"text",description:"Style class of the input field.",options:null},inputId:{control:"text",description:"Identifier of the input element.",options:null},inputRef:{control:"object",description:"Reference of the input element.",options:null},inputStyle:{control:"object",description:"Inline style of the input field.",options:null},itemTemplate:{control:"text",description:"Custom template for the items.",options:null},panelClassName:{control:"text",description:"Style class of the overlay panel element.",options:null},panelStyle:{control:"object",description:"Inline style of the overlay panel element.",options:null},pt:{control:"object",description:"Uses to pass attributes to DOM elements inside the component.",options:null},ptOptions:{control:"object",description:"Used to configure passthrough(pt) options of the component.",options:null},scrollHeight:{control:"text",description:"Maximum height of the suggestions panel.",options:null},suggestions:{control:"object",description:"An array of suggestions to display.",options:null},transitionOptions:{control:"object",description:'The properties of CSSTransition can be customized, except for "nodeRef" and "in" properties.',options:null},trigger:{control:"select",description:"Set trigger keyword.",options:["string","string[]"]},unstyled:{control:"boolean",description:"When enabled, it removes component related styles in the core.",options:null}}},A={args:{unstyled:!1}};var me,ye,ge;A.parameters={...A.parameters,docs:{...(me=A.parameters)==null?void 0:me.docs,source:{originalSource:`{
  args: {
    "unstyled": false
  }
}`,...(ge=(ye=A.parameters)==null?void 0:ye.docs)==null?void 0:ge.source}}};const Tt=["Default"];export{A as Default,Tt as __namedExportsOrder,jt as default};
//# sourceMappingURL=Mention.stories-6df173d2.js.map
