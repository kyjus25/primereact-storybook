import{r as v}from"./index-76fb7be0.js";import{u as Ft,a as Vt,b as Ht,c as At,d as Mt,e as Y}from"./hooks.esm-c93f10ee.js";import{P as Wt,D as T,O as x,c as be,m as Z,I as $t}from"./api.esm-2e2d159c.js";import{C as Dt}from"./componentbase.esm-b0caea1e.js";import{S as Bt}from"./index.esm-a9455747.js";function Ie(){return Ie=Object.assign?Object.assign.bind():function(a){for(var s=1;s<arguments.length;s++){var c=arguments[s];for(var e in c)Object.prototype.hasOwnProperty.call(c,e)&&(a[e]=c[e])}return a},Ie.apply(this,arguments)}function q(a){"@babel/helpers - typeof";return q=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},q(a)}function Jt(a,s){if(q(a)!=="object"||a===null)return a;var c=a[Symbol.toPrimitive];if(c!==void 0){var e=c.call(a,s||"default");if(q(e)!=="object")return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(a)}function Xt(a){var s=Jt(a,"string");return q(s)==="symbol"?s:String(s)}function ke(a,s,c){return s=Xt(s),s in a?Object.defineProperty(a,s,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[s]=c,a}function Ut(a){if(Array.isArray(a))return a}function kt(a,s){var c=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(c!=null){var e,j,A,y,m=[],M=!0,J=!1;try{if(A=(c=c.call(a)).next,s===0){if(Object(c)!==c)return;M=!1}else for(;!(M=(e=A.call(c)).done)&&(m.push(e.value),m.length!==s);M=!0);}catch(g){J=!0,j=g}finally{try{if(!M&&c.return!=null&&(y=c.return(),Object(y)!==y))return}finally{if(J)throw j}}return m}}function Xe(a,s){(s==null||s>a.length)&&(s=a.length);for(var c=0,e=new Array(s);c<s;c++)e[c]=a[c];return e}function Kt(a,s){if(a){if(typeof a=="string")return Xe(a,s);var c=Object.prototype.toString.call(a).slice(8,-1);if(c==="Object"&&a.constructor&&(c=a.constructor.name),c==="Map"||c==="Set")return Array.from(a);if(c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return Xe(a,s)}}function Yt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _(a,s){return Ut(a)||kt(a,s)||Kt(a,s)||Yt()}var Zt=`
.p-virtualscroller {
    position: relative;
    overflow: auto;
    contain: strict;
    transform: translateZ(0);
    will-change: scroll-position;
    outline: 0 none;
}

.p-virtualscroller-content {
    position: absolute;
    top: 0;
    left: 0;
    /*contain: content;*/
    min-height: 100%;
    min-width: 100%;
    will-change: transform;
}

.p-virtualscroller-spacer {
    position: absolute;
    top: 0;
    left: 0;
    height: 1px;
    width: 1px;
    transform-origin: 0 0;
    pointer-events: none;
}

.p-virtualscroller-loader {
    position: sticky;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
}

.p-virtualscroller-loader.p-component-overlay {
    display: flex;
    align-items: center;
    justify-content: center;
}

.p-virtualscroller-loading-icon {
    font-size: 2rem;
}

.p-virtualscroller-horizontal > .p-virtualscroller-content {
    display: flex;
}

/* Inline */
.p-virtualscroller-inline .p-virtualscroller-content {
    position: static;
}
`,oe=Dt.extend({defaultProps:{__TYPE:"VirtualScroller",__parentMetadata:null,id:null,style:null,className:null,tabIndex:0,items:null,itemSize:0,scrollHeight:null,scrollWidth:null,orientation:"vertical",step:0,numToleratedItems:null,delay:0,resizeDelay:10,appendOnly:!1,inline:!1,lazy:!1,disabled:!1,loaderDisabled:!1,loadingIcon:null,columns:null,loading:void 0,autoSize:!1,showSpacer:!0,showLoader:!1,loadingTemplate:null,loaderIconTemplate:null,itemTemplate:null,contentTemplate:null,onScroll:null,onScrollIndexChange:null,onLazyLoad:null,children:void 0},css:{styles:Zt}});function Ue(a,s){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(a);s&&(e=e.filter(function(j){return Object.getOwnPropertyDescriptor(a,j).enumerable})),c.push.apply(c,e)}return c}function B(a){for(var s=1;s<arguments.length;s++){var c=arguments[s]!=null?arguments[s]:{};s%2?Ue(Object(c),!0).forEach(function(e){ke(a,e,c[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):Ue(Object(c)).forEach(function(e){Object.defineProperty(a,e,Object.getOwnPropertyDescriptor(c,e))})}return a}var qt=v.memo(v.forwardRef(function(a,s){var c=v.useContext(Wt),e=oe.getProps(a,c),j=Ft(a)||{},A=e.orientation==="vertical",y=e.orientation==="horizontal",m=e.orientation==="both",M=v.useState(m?{rows:0,cols:0}:0),J=_(M,2),g=J[0],ze=J[1],Ke=v.useState(m?{rows:0,cols:0}:0),Re=_(Ke,2),S=Re[0],Oe=Re[1],Ye=v.useState(0),Ce=_(Ye,2),Te=Ce[0],Ze=Ce[1],qe=v.useState(m?{rows:0,cols:0}:0),Pe=_(qe,2),O=Pe[0],Ge=Pe[1],Qe=v.useState(e.numToleratedItems),Le=_(Qe,2),z=Le[0],se=Le[1],et=v.useState(e.loading||!1),Ee=_(et,2),P=Ee[0],ie=Ee[1],tt=v.useState([]),Ne=_(tt,2),W=Ne[0],rt=Ne[1],nt=oe.setMetaData({props:e,state:{first:g,last:S,page:Te,numItemsInViewport:O,numToleratedItems:z,loading:P,loaderArr:W}}),X=nt.ptm;Vt(oe.css.styles,{name:"virtualscroller"});var h=v.useRef(null),w=v.useRef(null),_e=v.useRef(null),ue=v.useRef(null),F=v.useRef(m?{top:0,left:0}:0),ce=v.useRef(null),fe=v.useRef(null),G=v.useRef({}),Q=v.useRef({}),U=v.useRef(null),k=v.useRef(null),je=v.useRef(null),xe=v.useRef(null),me=v.useRef(!1),$=v.useRef(null),at=Ht({listener:function(t){return $e()},when:!e.disabled}),lt=_(at,1),ot=lt[0],st=At({target:"window",type:"orientationchange",listener:function(t){return $e()},when:!e.disabled}),it=_(st,1),ut=it[0],ct=function(){return h},ee=function(t){return Math.floor((t+z*4)/(e.step||1))},ft=function(t){w.current=t||w.current||T.findSingle(h.current,".p-virtualscroller-content")},ve=function(t){return e.step?Te!==ee(t):!0},ge=function(t){F.current=m?{top:0,left:0}:0,h.current&&h.current.scrollTo(t)},Fe=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"auto",n=He(),l=n.numToleratedItems,u=te(),o=function(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,L=arguments.length>1?arguments[1]:void 0;return C<=L?0:C},i=function(C,L,V){return C*L+V},d=function(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return ge({left:C,top:L,behavior:r})},p=m?{rows:0,cols:0}:0,b=!1;m?(p={rows:o(t[0],l[0]),cols:o(t[1],l[1])},d(i(p.cols,e.itemSize[1],u.left),i(p.rows,e.itemSize[0],u.top)),b=g.rows!==p.rows||g.cols!==p.cols):(p=o(t,l),y?d(i(p,e.itemSize,u.left),0):d(0,i(p,e.itemSize,u.top)),b=g!==p),me.current=b,ze(p)},mt=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"auto";if(r){var l=Ve(),u=l.first,o=l.viewport,i=function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return ge({left:L,top:V,behavior:n})},d=r==="to-start",p=r==="to-end";if(d){if(m)o.first.rows-u.rows>t[0]?i(o.first.cols*e.itemSize[1],(o.first.rows-1)*e.itemSize[0]):o.first.cols-u.cols>t[1]&&i((o.first.cols-1)*e.itemSize[1],o.first.rows*e.itemSize[0]);else if(o.first-u>t){var b=(o.first-1)*e.itemSize;y?i(b,0):i(0,b)}}else if(p){if(m)o.last.rows-u.rows<=t[0]+1?i(o.first.cols*e.itemSize[1],(o.first.rows+1)*e.itemSize[0]):o.last.cols-u.cols<=t[1]+1&&i((o.first.cols+1)*e.itemSize[1],o.first.rows*e.itemSize[0]);else if(o.last-u<=t+1){var R=(o.first+1)*e.itemSize;y?i(R,0):i(0,R)}}}else Fe(t,n)},vt=function(){return P?e.loaderDisabled?W:[]:pe()},gt=function(){return e.columns&&m||y?P&&e.loaderDisabled?m?W[0]:W:e.columns.slice(m?g.cols:g,m?S.cols:S):e.columns},Ve=function(){var t=function(p,b){return Math.floor(p/(b||p))},r=g,n=0;if(h.current){var l=h.current,u=l.scrollTop,o=l.scrollLeft;if(m)r={rows:t(u,e.itemSize[0]),cols:t(o,e.itemSize[1])},n={rows:r.rows+O.rows,cols:r.cols+O.cols};else{var i=y?o:u;r=t(i,e.itemSize),n=r+O}}return{first:g,last:S,viewport:{first:r,last:n}}},He=function(){var t=te(),r=h.current?h.current.offsetWidth-t.left:0,n=h.current?h.current.offsetHeight-t.top:0,l=function(p,b){return Math.ceil(p/(b||p))},u=function(p){return Math.ceil(p/2)},o=m?{rows:l(n,e.itemSize[0]),cols:l(r,e.itemSize[1])}:l(y?r:n,e.itemSize),i=z||(m?[u(o.rows),u(o.cols)]:u(o));return{numItemsInViewport:o,numToleratedItems:i}},pt=function(){var t=He(),r=t.numItemsInViewport,n=t.numToleratedItems,l=function(i,d,p){var b=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return Ae(i+d+(i<p?2:3)*p,b)},u=m?{rows:l(g.rows,r.rows,n[0]),cols:l(g.cols,r.cols,n[1],!0)}:l(g,r,n);Ge(r),se(n),Oe(u),e.showLoader&&rt(m?Array.from({length:r.rows}).map(function(){return Array.from({length:r.cols})}):Array.from({length:r})),e.lazy&&Promise.resolve().then(function(){$.current={first:e.step?m?{rows:0,cols:g.cols}:0:g,last:Math.min(e.step?e.step:u,e.items.length)},e.onLazyLoad&&e.onLazyLoad($.current)})},dt=function(t){e.autoSize&&!t&&Promise.resolve().then(function(){if(w.current){w.current.style.minHeight=w.current.style.minWidth="auto",w.current.style.position="relative",h.current.style.contain="none";var r=[T.getWidth(h.current),T.getHeight(h.current)],n=r[0],l=r[1];(m||y)&&(h.current.style.width=(n<U.current?n:e.scrollWidth||U.current)+"px"),(m||A)&&(h.current.style.height=(l<k.current?l:e.scrollHeight||k.current)+"px"),w.current.style.minHeight=w.current.style.minWidth="",w.current.style.position="",h.current.style.contain=""}})},Ae=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,r=arguments.length>1?arguments[1]:void 0;return e.items?Math.min(r?(e.columns||e.items[0]).length:e.items.length,t):0},te=function(){if(w.current){var t=getComputedStyle(w.current),r=parseFloat(t.paddingLeft)+Math.max(parseFloat(t.left)||0,0),n=parseFloat(t.paddingRight)+Math.max(parseFloat(t.right)||0,0),l=parseFloat(t.paddingTop)+Math.max(parseFloat(t.top)||0,0),u=parseFloat(t.paddingBottom)+Math.max(parseFloat(t.bottom)||0,0);return{left:r,right:n,top:l,bottom:u,x:r+n,y:l+u}}return{left:0,right:0,top:0,bottom:0,x:0,y:0}},ht=function(){if(h.current){var t=h.current.parentElement,r=e.scrollWidth||"".concat(h.current.offsetWidth||t.offsetWidth,"px"),n=e.scrollHeight||"".concat(h.current.offsetHeight||t.offsetHeight,"px"),l=function(o,i){return h.current.style[o]=i};m||y?(l("height",n),l("width",r)):l("height",n)}},St=function(){var t=e.items;if(t){var r=te(),n=function(u,o,i){var d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;return Q.current=B(B({},Q.current),ke({},"".concat(u),(o||[]).length*i+d+"px"))};m?(n("height",t,e.itemSize[0],r.y),n("width",e.columns||t[1],e.itemSize[1],r.x)):y?n("width",e.columns||t,e.itemSize,r.x):n("height",t,e.itemSize,r.y)}},yt=function(t){if(w.current&&!e.appendOnly){var r=t?t.first:g,n=function(i,d){return i*d},l=function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;ue.current&&(ue.current.style.top="-".concat(d,"px")),G.current=B(B({},G.current),{transform:"translate3d(".concat(i,"px, ").concat(d,"px, 0)")})};if(m)l(n(r.cols,e.itemSize[1]),n(r.rows,e.itemSize[0]));else{var u=n(r,e.itemSize);y?l(u,0):l(0,u)}}},Me=function(t){var r=t.target,n=te(),l=function(I,E){return I?I>E?I-E:I:0},u=function(I,E){return Math.floor(I/(E||I))},o=function(I,E,K,ae,N,H){return I<=N?N:H?K-ae-N:E+N-1},i=function(I,E,K,ae,N,H,le){return I<=H?0:Math.max(0,le?I<E?K:I-H:I>E?K:I-2*H)},d=function(I,E,K,ae,N,H){var le=E+ae+2*N;return I>=N&&(le+=N+1),Ae(le,H)},p=l(r.scrollTop,n.top),b=l(r.scrollLeft,n.left),R=m?{rows:0,cols:0}:0,C=S,L=!1,V=F.current;if(m){var de=F.current.top<=p,he=F.current.left<=b;if(!e.appendOnly||e.appendOnly&&(de||he)){var D={rows:u(p,e.itemSize[0]),cols:u(b,e.itemSize[1])},Je={rows:o(D.rows,g.rows,S.rows,O.rows,z[0],de),cols:o(D.cols,g.cols,S.cols,O.cols,z[1],he)};R={rows:i(D.rows,Je.rows,g.rows,S.rows,O.rows,z[0],de),cols:i(D.cols,Je.cols,g.cols,S.cols,O.cols,z[1],he)},C={rows:d(D.rows,R.rows,S.rows,O.rows,z[0]),cols:d(D.cols,R.cols,S.cols,O.cols,z[1],!0)},L=R.rows!==g.rows||C.rows!==S.rows||R.cols!==g.cols||C.cols!==S.cols||me.current,V={top:p,left:b}}}else{var Se=y?b:p,ye=F.current<=Se;if(!e.appendOnly||e.appendOnly&&ye){var we=u(Se,e.itemSize),xt=o(we,g,S,O,z,ye);R=i(we,xt,g,S,O,z,ye),C=d(we,R,S,O,z),L=R!==g||C!==S||me.current,V=Se}}return{first:R,last:C,isRangeChanged:L,scrollPos:V}},We=function(t){var r=Me(t),n=r.first,l=r.last,u=r.isRangeChanged,o=r.scrollPos;if(u){var i={first:n,last:l};if(yt(i),ze(n),Oe(l),F.current=o,e.onScrollIndexChange&&e.onScrollIndexChange(i),e.lazy&&ve(n)){var d={first:e.step?Math.min(ee(n)*e.step,e.items.length-e.step):n,last:Math.min(e.step?(ee(n)+1)*e.step:l,e.items.length)},p=!$.current||$.current.first!==d.first||$.current.last!==d.last;p&&e.onLazyLoad&&e.onLazyLoad(d),$.current=d}}},wt=function(t){if(e.onScroll&&e.onScroll(t),e.delay){if(ce.current&&clearTimeout(ce.current),ve(g)){if(!P&&e.showLoader){var r=Me(t),n=r.isRangeChanged,l=n||(e.step?ve(g):!1);l&&ie(!0)}ce.current=setTimeout(function(){We(t),P&&e.showLoader&&(!e.lazy||e.loading===void 0)&&(ie(!1),Ze(ee(g)))},e.delay)}}else We(t)},$e=function(){fe.current&&clearTimeout(fe.current),fe.current=setTimeout(function(){if(h.current){var t=[T.getWidth(h.current),T.getHeight(h.current)],r=t[0],n=t[1],l=r!==U.current,u=n!==k.current,o=m?l||u:y?l:A?u:!1;o&&(se(e.numToleratedItems),U.current=r,k.current=n,je.current=T.getWidth(w.current),xe.current=T.getHeight(w.current))}},e.resizeDelay)},De=function(t){var r=(e.items||[]).length,n=m?g.rows+t:g+t;return{index:n,count:r,first:n===0,last:n===r-1,even:n%2===0,odd:n%2!==0,props:e}},Be=function(t,r){var n=W.length;return B({index:t,count:n,first:t===0,last:t===n-1,even:t%2===0,odd:t%2!==0,props:e},r)},pe=function(){var t=e.items;return t&&!P?m?t.slice(e.appendOnly?0:g.rows,S.rows).map(function(r){return e.columns?r:r.slice(e.appendOnly?0:g.cols,S.cols)}):y&&e.columns?t:t.slice(e.appendOnly?0:g,S):[]},bt=function(){h.current&&T.isVisible(h.current)&&(ft(w.current),re(),ot(),ut(),U.current=T.getWidth(h.current),k.current=T.getHeight(h.current),je.current=T.getWidth(w.current),xe.current=T.getHeight(w.current))},re=function(){e.disabled||(ht(),pt(),St())};Mt(function(){bt()}),Y(function(){re()},[e.itemSize,e.scrollHeight,e.scrollWidth]),Y(function(){e.numToleratedItems!==z&&se(e.numToleratedItems)},[e.numToleratedItems]),Y(function(){e.numToleratedItems===z&&re()},[z]),Y(function(){(!j.items||j.items.length!==(e.items||[]).length)&&re();var f=P;e.lazy&&j.loading!==e.loading&&e.loading!==P&&(ie(e.loading),f=e.loading),dt(f)}),Y(function(){F.current=m?{top:0,left:0}:0},[e.orientation]),v.useImperativeHandle(s,function(){return{props:e,getElementRef:ct,scrollTo:ge,scrollToIndex:Fe,scrollInView:mt,getRenderedRange:Ve}});var It=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=Be(t,r),l=x.getJSXElement(e.loadingTemplate,n);return v.createElement(v.Fragment,{key:t},l)},zt=function(){var t="p-virtualscroller-loading-icon",r=Z({className:t},X("loadingIcon")),n=e.loadingIcon||v.createElement(Bt,Ie({},r,{spin:!0})),l=$t.getJSXIcon(n,B({},r),{props:e});if(!e.loaderDisabled&&e.showLoader&&P){var u=be("p-virtualscroller-loader",{"p-component-overlay":!e.loadingTemplate}),o=l;if(e.loadingTemplate)o=W.map(function(p,b){return It(b,m&&{numCols:O.cols})});else if(e.loaderIconTemplate){var i={iconClassName:t,element:o,props:e};o=x.getJSXElement(e.loaderIconTemplate,i)}var d=Z({className:u},X("loader"));return v.createElement("div",d,o)}return null},Rt=function(){if(e.showSpacer){var t=Z({ref:_e,style:Q.current,className:"p-virtualscroller-spacer"},X("spacer"));return v.createElement("div",t)}return null},Ot=function(t,r){var n=De(r),l=x.getJSXElement(e.itemTemplate,t,n);return v.createElement(v.Fragment,{key:n.index},l)},Ct=function(){var t=pe();return t.map(Ot)},Tt=function(){var t=Ct(),r=be("p-virtualscroller-content",{"p-virtualscroller-loading":P}),n=Z({ref:w,style:G.current,className:r},X("content")),l=v.createElement("div",n,t);if(e.contentTemplate){var u={style:G.current,className:r,spacerStyle:Q.current,contentRef:function(i){return w.current=x.getRefElement(i)},spacerRef:function(i){return _e.current=x.getRefElement(i)},stickyRef:function(i){return ue.current=x.getRefElement(i)},items:pe(),getItemOptions:function(i){return De(i)},children:t,element:l,props:e,loading:P,getLoaderOptions:function(i,d){return Be(i,d)},loadingTemplate:e.loadingTemplate,itemSize:e.itemSize,rows:vt(),columns:gt(),vertical:A,horizontal:y,both:m};return x.getJSXElement(e.contentTemplate,u)}return l};if(e.disabled){var Pt=x.getJSXElement(e.contentTemplate,{items:e.items,rows:e.items,columns:e.columns});return v.createElement(v.Fragment,null,e.children,Pt)}else{var Lt=be("p-virtualscroller",{"p-virtualscroller-inline":e.inline,"p-virtualscroller-both p-both-scroll":m,"p-virtualscroller-horizontal p-horizontal-scroll":y},e.className),Et=zt(),Nt=Tt(),_t=Rt(),jt=Z({ref:h,className:Lt,tabIndex:e.tabIndex,style:e.style,onScroll:function(t){return wt(t)}},oe.getOtherProps(e),X("root"));return v.createElement("div",jt,Nt,_t,Et)}}));qt.displayName="VirtualScroller";export{qt as V};
//# sourceMappingURL=virtualscroller.esm-ad3bf7d3.js.map
